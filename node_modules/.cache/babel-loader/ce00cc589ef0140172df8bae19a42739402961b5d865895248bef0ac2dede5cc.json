{"ast":null,"code":"import React from'react';import{DataGrid}from'@mui/x-data-grid';import{Box,Paper,Typography}from'@material-ui/core';import{useIntl}from'react-intl';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function fixedFloat(nbr){var toFixed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;return parseFloat(nbr.toFixed(toFixed));}// a / {[(1 + i) ^n] - 1} / [i(1 + i)^n]\n// ia / [1 − (1+i)^-n]\nfunction calculateRepaymentAmount(a,n,i){// return a / (((1 + i) ** n - 1) / (i * (1 + i) ** n));\nreturn i*a/(1-Math.pow(1+i,-n));}function Amortization(props){var _props$store=props.store,loanAmount=_props$store.loanAmount,remainingTerm=_props$store.remainingTerm,interestRate=_props$store.interestRate;var intl=useIntl();if(!loanAmount||!remainingTerm||!interestRate){return/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:intl.formatMessage({id:'loan-repayment-schedule'})})})});}var repaymentAmount=fixedFloat(calculateRepaymentAmount(loanAmount,remainingTerm*12,interestRate/100/12));var columns=[{field:'id',headerName:'#',type:'number',width:30},{field:'balance',headerName:intl.formatMessage({id:'balance'}),type:'number',width:130},{field:'monthlyRepayment',headerName:intl.formatMessage({id:'monthly'}),type:'number',width:130},{field:'principal',headerName:intl.formatMessage({id:'principal'}),type:'number',width:130},{field:'interest',headerName:intl.formatMessage({id:'interest'}),type:'number',width:130}];var rowData=[];var count=0;var balance=loanAmount;while(balance>0){var interest=fixedFloat(balance*interestRate/100/12);var principal=fixedFloat(repaymentAmount-interest);var newRow={};newRow.id=count++;newRow.balance=fixedFloat(balance-principal);newRow.monthlyRepayment=repaymentAmount;newRow.principal=fixedFloat(repaymentAmount-interest);newRow.interest=fixedFloat(balance*interestRate/100/12);balance=fixedFloat(balance-principal);rowData.push(newRow);}return/*#__PURE__*/_jsxs(Paper,{children:[/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:intl.formatMessage({id:'loan-repayment-schedule'})})}),/*#__PURE__*/_jsx(Box,{sx:{p:2},children:/*#__PURE__*/_jsx(\"div\",{style:{height:300,width:'100%'},children:/*#__PURE__*/_jsx(DataGrid,{rows:rowData,columns:columns,pageSize:5,height:100,rowsPerPageOptions:[5]})})})]});}export default Amortization;","map":{"version":3,"names":["React","DataGrid","Box","Paper","Typography","useIntl","jsx","_jsx","jsxs","_jsxs","fixedFloat","nbr","toFixed","arguments","length","undefined","parseFloat","calculateRepaymentAmount","a","n","i","Math","pow","Amortization","props","_props$store","store","loanAmount","remainingTerm","interestRate","intl","children","sx","p","variant","gutterBottom","formatMessage","id","repaymentAmount","columns","field","headerName","type","width","rowData","count","balance","interest","principal","newRow","monthlyRepayment","push","style","height","rows","pageSize","rowsPerPageOptions"],"sources":["/Users/guilherme/Downloads/react-loan-calculator-main/src/components/Amortization.js"],"sourcesContent":["import React from 'react';\r\nimport { DataGrid } from '@mui/x-data-grid';\r\n\r\nimport { Box, Paper, Typography } from '@material-ui/core';\r\n\r\nimport {useIntl} from 'react-intl';\r\n\r\nfunction fixedFloat(nbr, toFixed = 2) {\r\n  return parseFloat(nbr.toFixed(toFixed));\r\n}\r\n\r\n// a / {[(1 + i) ^n] - 1} / [i(1 + i)^n]\r\n// ia / [1 − (1+i)^-n]\r\nfunction calculateRepaymentAmount(a, n, i) {\r\n  // return a / (((1 + i) ** n - 1) / (i * (1 + i) ** n));\r\n  return (i * a) / (1 - (1 + i) ** -n);\r\n}\r\n\r\nfunction Amortization(props) {\r\n  const { loanAmount, remainingTerm, interestRate } = props.store;\r\n\r\n  const intl = useIntl();\r\n\r\n  if (!loanAmount || !remainingTerm || !interestRate) {\r\n    return (<Paper>\r\n      <Box sx={{ p: 2 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          {intl.formatMessage({id: 'loan-repayment-schedule'})}\r\n        </Typography>\r\n      </Box>\r\n    </Paper>);\r\n  }\r\n\r\n  const repaymentAmount = fixedFloat(\r\n    calculateRepaymentAmount(\r\n      loanAmount,\r\n      remainingTerm * 12,\r\n      interestRate / 100 / 12\r\n    )\r\n  );\r\n\r\n  const columns = [\r\n    { field: 'id', headerName: '#', type: 'number', width: 30 },\r\n    { field: 'balance', headerName: intl.formatMessage({id: 'balance'}), type: 'number', width: 130 },\r\n    { field: 'monthlyRepayment', headerName: intl.formatMessage({id: 'monthly'}), type: 'number', width: 130 },\r\n    { field: 'principal', headerName: intl.formatMessage({id: 'principal'}), type: 'number', width: 130 },\r\n    { field: 'interest', headerName: intl.formatMessage({id: 'interest'}), type: 'number', width: 130 }\r\n  ];\r\n  \r\n  const rowData = [];\r\n    \r\n  let count = 0;\r\n  let balance = loanAmount;\r\n\r\n  while(balance>0){\r\n\r\n    const interest = fixedFloat((balance * interestRate) / 100 / 12);\r\n    const principal = fixedFloat(repaymentAmount - interest);\r\n    const newRow = {};\r\n\r\n    newRow.id=count++;\r\n    newRow.balance= fixedFloat(balance - principal);\r\n    newRow.monthlyRepayment= repaymentAmount;\r\n    newRow.principal= fixedFloat(repaymentAmount - interest);\r\n    newRow.interest= fixedFloat((balance * interestRate) / 100 / 12);\r\n\r\n    balance = fixedFloat(balance - principal);\r\n    \r\n    rowData.push(newRow);\r\n  }\r\n\r\n  return (\r\n    <Paper>\r\n      <Box sx={{ p: 2 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          {intl.formatMessage({id: 'loan-repayment-schedule'})}\r\n        </Typography>\r\n      </Box>\r\n      <Box sx={{ p: 2 }}>\r\n        <div style={{ height: 300, width: '100%' }}>\r\n          <DataGrid\r\n              rows={rowData}\r\n              columns={columns}\r\n              pageSize={5}\r\n              height={100}\r\n              rowsPerPageOptions={[5]}\r\n            />\r\n        </div>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default Amortization;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}