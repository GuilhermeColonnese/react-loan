{"ast":null,"code":"import _toConsumableArray from \"/Users/guilherme/Downloads/react-loan-calculator-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"/Users/guilherme/Downloads/react-loan-calculator-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridColumnFieldsSelector, gridColumnDefinitionsSelector, gridColumnLookupSelector, gridColumnsMetaSelector, gridColumnsSelector, gridColumnVisibilityModelSelector, gridVisibleColumnDefinitionsSelector, gridColumnPositionsSelector } from './gridColumnsSelector';\nimport { useGridApiEventHandler, useGridApiOptionHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridRegisterPipeProcessor, useGridRegisterPipeApplier } from '../../core/pipeProcessing';\nimport { hydrateColumnsWidth, computeColumnTypes, createColumnsState, mergeColumnsState, COLUMNS_DIMENSION_PROPERTIES } from './gridColumnsUtils';\nimport { GridPreferencePanelsValue } from '../preferencesPanel';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var columnsStateInitializer = function columnsStateInitializer(state, props, apiRef) {\n  var _props$initialState, _props$initialState$c, _props$initialState2, _ref, _props$columnVisibili, _props$initialState3, _props$initialState3$;\n  var isUsingColumnVisibilityModel = !!props.columnVisibilityModel || !!((_props$initialState = props.initialState) != null && (_props$initialState$c = _props$initialState.columns) != null && _props$initialState$c.columnVisibilityModel);\n  apiRef.current.unstable_caches.columns = {\n    isUsingColumnVisibilityModel: isUsingColumnVisibilityModel\n  };\n  var columnsTypes = computeColumnTypes(props.columnTypes);\n  var columnsState = createColumnsState({\n    apiRef: apiRef,\n    columnTypes: columnsTypes,\n    columnsToUpsert: props.columns,\n    initialState: (_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.columns,\n    shouldRegenColumnVisibilityModelFromColumns: !isUsingColumnVisibilityModel,\n    currentColumnVisibilityModel: (_ref = (_props$columnVisibili = props.columnVisibilityModel) != null ? _props$columnVisibili : (_props$initialState3 = props.initialState) == null ? void 0 : (_props$initialState3$ = _props$initialState3.columns) == null ? void 0 : _props$initialState3$.columnVisibilityModel) != null ? _ref : {},\n    keepOnlyColumnsToUpsert: true\n  });\n  return _extends({}, state, {\n    columns: columnsState\n  });\n};\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridDimensions (method, event) - can be after\n * TODO: Impossible priority - useGridParamsApi also needs to be after useGridColumns\n */\n\nexport function useGridColumns(apiRef, props) {\n  var _props$initialState5, _props$componentsProp2;\n  var logger = useGridLogger(apiRef, 'useGridColumns');\n  var columnTypes = React.useMemo(function () {\n    return computeColumnTypes(props.columnTypes);\n  }, [props.columnTypes]);\n  var previousColumnsProp = React.useRef(props.columns);\n  var previousColumnTypesProp = React.useRef(columnTypes);\n  apiRef.current.unstable_registerControlState({\n    stateId: 'visibleColumns',\n    propModel: props.columnVisibilityModel,\n    propOnChange: props.onColumnVisibilityModelChange,\n    stateSelector: gridColumnVisibilityModelSelector,\n    changeEvent: 'columnVisibilityModelChange'\n  });\n  var setGridColumnsState = React.useCallback(function (columnsState) {\n    logger.debug('Updating columns state.');\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    apiRef.current.forceUpdate();\n    apiRef.current.publishEvent('columnsChange', columnsState.all);\n  }, [logger, apiRef]);\n  /**\n   * API METHODS\n   */\n\n  var getColumn = React.useCallback(function (field) {\n    return gridColumnLookupSelector(apiRef)[field];\n  }, [apiRef]);\n  var getAllColumns = React.useCallback(function () {\n    return gridColumnDefinitionsSelector(apiRef);\n  }, [apiRef]);\n  var getVisibleColumns = React.useCallback(function () {\n    return gridVisibleColumnDefinitionsSelector(apiRef);\n  }, [apiRef]);\n  var getColumnsMeta = React.useCallback(function () {\n    return gridColumnsMetaSelector(apiRef);\n  }, [apiRef]);\n  var getColumnIndex = React.useCallback(function (field) {\n    var useVisibleColumns = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var columns = useVisibleColumns ? gridVisibleColumnDefinitionsSelector(apiRef) : gridColumnDefinitionsSelector(apiRef);\n    return columns.findIndex(function (col) {\n      return col.field === field;\n    });\n  }, [apiRef]);\n  var getColumnPosition = React.useCallback(function (field) {\n    var index = getColumnIndex(field);\n    return gridColumnPositionsSelector(apiRef)[index];\n  }, [apiRef, getColumnIndex]);\n  var setColumnVisibilityModel = React.useCallback(function (model) {\n    var currentModel = gridColumnVisibilityModelSelector(apiRef);\n    if (currentModel !== model) {\n      apiRef.current.setState(function (state) {\n        return _extends({}, state, {\n          columns: createColumnsState({\n            apiRef: apiRef,\n            columnTypes: columnTypes,\n            columnsToUpsert: [],\n            initialState: undefined,\n            shouldRegenColumnVisibilityModelFromColumns: false,\n            currentColumnVisibilityModel: model,\n            keepOnlyColumnsToUpsert: false\n          })\n        });\n      });\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, columnTypes]);\n  var updateColumns = React.useCallback(function (columns) {\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: columns,\n      initialState: undefined,\n      shouldRegenColumnVisibilityModelFromColumns: true,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, setGridColumnsState, columnTypes]);\n  var updateColumn = React.useCallback(function (column) {\n    return apiRef.current.updateColumns([column]);\n  }, [apiRef]);\n  var setColumnVisibility = React.useCallback(function (field, isVisible) {\n    // We keep updating the `hide` option of `GridColDef` when not controlling the model to avoid any breaking change.\n    // `updateColumns` take care of updating the model itself if needs be.\n    // TODO v6: stop using the `hide` field even when the model is not defined\n    if (apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel) {\n      var _columnVisibilityMode;\n      var columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n      var isCurrentlyVisible = (_columnVisibilityMode = columnVisibilityModel[field]) != null ? _columnVisibilityMode : true;\n      if (isVisible !== isCurrentlyVisible) {\n        var newModel = _extends({}, columnVisibilityModel, _defineProperty({}, field, isVisible));\n        apiRef.current.setColumnVisibilityModel(newModel);\n      }\n    } else {\n      var column = apiRef.current.getColumn(field);\n      var newColumn = _extends({}, column, {\n        hide: !isVisible\n      });\n      apiRef.current.updateColumns([newColumn]);\n      var params = {\n        field: field,\n        colDef: newColumn,\n        isVisible: isVisible\n      };\n      apiRef.current.publishEvent('columnVisibilityChange', params);\n    }\n  }, [apiRef]);\n  var setColumnIndex = React.useCallback(function (field, targetIndexPosition) {\n    var allColumns = gridColumnFieldsSelector(apiRef);\n    var oldIndexPosition = allColumns.findIndex(function (col) {\n      return col === field;\n    });\n    if (oldIndexPosition === targetIndexPosition) {\n      return;\n    }\n    logger.debug(\"Moving column \".concat(field, \" to index \").concat(targetIndexPosition));\n    var updatedColumns = _toConsumableArray(allColumns);\n    var fieldRemoved = updatedColumns.splice(oldIndexPosition, 1)[0];\n    updatedColumns.splice(targetIndexPosition, 0, fieldRemoved);\n    setGridColumnsState(_extends({}, gridColumnsSelector(apiRef.current.state), {\n      all: updatedColumns\n    }));\n    var params = {\n      field: field,\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: apiRef.current.getColumn(field),\n      targetIndex: targetIndexPosition,\n      oldIndex: oldIndexPosition\n    };\n    apiRef.current.publishEvent('columnOrderChange', params);\n  }, [apiRef, logger, setGridColumnsState]);\n  var setColumnWidth = React.useCallback(function (field, width) {\n    logger.debug(\"Updating column \".concat(field, \" width to \").concat(width));\n    var column = apiRef.current.getColumn(field);\n    var newColumn = _extends({}, column, {\n      width: width\n    });\n    apiRef.current.updateColumns([newColumn]);\n    apiRef.current.publishEvent('columnWidthChange', {\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: newColumn,\n      width: width\n    });\n  }, [apiRef, logger]);\n  var columnApi = {\n    getColumn: getColumn,\n    getAllColumns: getAllColumns,\n    getColumnIndex: getColumnIndex,\n    getColumnPosition: getColumnPosition,\n    getVisibleColumns: getVisibleColumns,\n    getColumnsMeta: getColumnsMeta,\n    updateColumn: updateColumn,\n    updateColumns: updateColumns,\n    setColumnVisibilityModel: setColumnVisibilityModel,\n    setColumnVisibility: setColumnVisibility,\n    setColumnIndex: setColumnIndex,\n    setColumnWidth: setColumnWidth\n  };\n  useGridApiMethod(apiRef, columnApi, 'GridColumnApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  var stateExportPreProcessing = React.useCallback(function (prevState, context) {\n    var columnsStateToExport = {};\n    if (apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel) {\n      var _props$initialState$c2, _props$initialState4, _props$initialState4$;\n      var columnVisibilityModelToExport = gridColumnVisibilityModelSelector(apiRef);\n      var shouldExportColumnVisibilityModel =\n      // Always export if the `exportOnlyDirtyModels` property is activated\n      !context.exportOnlyDirtyModels ||\n      // Always export if the model is controlled\n      props.columnVisibilityModel != null ||\n      // Always export if the model has been initialized\n      // TODO v6 Do a nullish check instead to export even if the initial model equals \"{}\"\n      Object.keys((_props$initialState$c2 = (_props$initialState4 = props.initialState) == null ? void 0 : (_props$initialState4$ = _props$initialState4.columns) == null ? void 0 : _props$initialState4$.columnVisibilityModel) != null ? _props$initialState$c2 : {}).length > 0 ||\n      // Always export if the model is not empty\n      Object.keys(columnVisibilityModelToExport).length > 0;\n      if (shouldExportColumnVisibilityModel) {\n        columnsStateToExport.columnVisibilityModel = columnVisibilityModelToExport;\n      }\n    }\n    columnsStateToExport.orderedFields = gridColumnFieldsSelector(apiRef);\n    var columns = gridColumnDefinitionsSelector(apiRef);\n    var dimensions = {};\n    columns.forEach(function (colDef) {\n      if (colDef.hasBeenResized) {\n        var colDefDimensions = {};\n        COLUMNS_DIMENSION_PROPERTIES.forEach(function (propertyName) {\n          var propertyValue = colDef[propertyName];\n          if (propertyValue === Infinity) {\n            propertyValue = -1;\n          }\n          colDefDimensions[propertyName] = propertyValue;\n        });\n        dimensions[colDef.field] = colDefDimensions;\n      }\n    });\n    if (Object.keys(dimensions).length > 0) {\n      columnsStateToExport.dimensions = dimensions;\n    }\n    return _extends({}, prevState, {\n      columns: columnsStateToExport\n    });\n  }, [apiRef, props.columnVisibilityModel, (_props$initialState5 = props.initialState) == null ? void 0 : _props$initialState5.columns]);\n  var stateRestorePreProcessing = React.useCallback(function (params, context) {\n    var _context$stateToResto;\n    var columnVisibilityModelToImport = apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel ? (_context$stateToResto = context.stateToRestore.columns) == null ? void 0 : _context$stateToResto.columnVisibilityModel : undefined;\n    var initialState = context.stateToRestore.columns;\n    if (columnVisibilityModelToImport == null && initialState == null) {\n      return params;\n    }\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: [],\n      initialState: initialState,\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      currentColumnVisibilityModel: columnVisibilityModelToImport,\n      keepOnlyColumnsToUpsert: false\n    });\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    if (initialState != null) {\n      apiRef.current.publishEvent('columnsChange', columnsState.all);\n    }\n    return params;\n  }, [apiRef, columnTypes]);\n  var preferencePanelPreProcessing = React.useCallback(function (initialValue, value) {\n    if (value === GridPreferencePanelsValue.columns) {\n      var _props$componentsProp;\n      var ColumnsPanel = props.components.ColumnsPanel;\n      return /*#__PURE__*/_jsx(ColumnsPanel, _extends({}, (_props$componentsProp = props.componentsProps) == null ? void 0 : _props$componentsProp.columnsPanel));\n    }\n    return initialValue;\n  }, [props.components.ColumnsPanel, (_props$componentsProp2 = props.componentsProps) == null ? void 0 : _props$componentsProp2.columnsPanel]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  /**\n   * EVENTS\n   */\n\n  var prevInnerWidth = React.useRef(null);\n  var handleGridSizeChange = function handleGridSizeChange(viewportInnerSize) {\n    if (prevInnerWidth.current !== viewportInnerSize.width) {\n      prevInnerWidth.current = viewportInnerSize.width;\n      setGridColumnsState(hydrateColumnsWidth(gridColumnsSelector(apiRef.current.state), viewportInnerSize.width));\n    }\n  };\n  useGridApiEventHandler(apiRef, 'viewportInnerSizeChange', handleGridSizeChange);\n  useGridApiOptionHandler(apiRef, 'columnVisibilityChange', props.onColumnVisibilityChange);\n  /**\n   * APPLIERS\n   */\n\n  var hydrateColumns = React.useCallback(function () {\n    logger.info(\"Columns pipe processing have changed, regenerating the columns\");\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      columnsToUpsert: [],\n      initialState: undefined,\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, logger, setGridColumnsState, columnTypes]);\n  useGridRegisterPipeApplier(apiRef, 'hydrateColumns', hydrateColumns);\n  /**\n   * EFFECTS\n   */\n  // The effect do not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n\n  var isFirstRender = React.useRef(true);\n  React.useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    logger.info(\"GridColumns have changed, new length \".concat(props.columns.length));\n    if (previousColumnsProp.current === props.columns && previousColumnTypesProp.current === columnTypes) {\n      return;\n    }\n    var columnsState = createColumnsState({\n      apiRef: apiRef,\n      columnTypes: columnTypes,\n      initialState: undefined,\n      // If the user provides a model, we don't want to set it in the state here because it has it's dedicated `useEffect` which calls `setColumnVisibilityModel`\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      columnsToUpsert: props.columns,\n      keepOnlyColumnsToUpsert: true\n    });\n    previousColumnsProp.current = props.columns;\n    previousColumnTypesProp.current = columnTypes;\n    setGridColumnsState(columnsState);\n  }, [logger, apiRef, setGridColumnsState, props.columns, columnTypes]);\n  React.useEffect(function () {\n    if (props.columnVisibilityModel !== undefined) {\n      apiRef.current.setColumnVisibilityModel(props.columnVisibilityModel);\n    }\n  }, [apiRef, logger, props.columnVisibilityModel]);\n}","map":{"version":3,"names":["_extends","React","useGridApiMethod","useGridLogger","gridColumnFieldsSelector","gridColumnDefinitionsSelector","gridColumnLookupSelector","gridColumnsMetaSelector","gridColumnsSelector","gridColumnVisibilityModelSelector","gridVisibleColumnDefinitionsSelector","gridColumnPositionsSelector","useGridApiEventHandler","useGridApiOptionHandler","useGridRegisterPipeProcessor","useGridRegisterPipeApplier","hydrateColumnsWidth","computeColumnTypes","createColumnsState","mergeColumnsState","COLUMNS_DIMENSION_PROPERTIES","GridPreferencePanelsValue","jsx","_jsx","columnsStateInitializer","state","props","apiRef","_props$initialState","_props$initialState$c","_props$initialState2","_ref","_props$columnVisibili","_props$initialState3","_props$initialState3$","isUsingColumnVisibilityModel","columnVisibilityModel","initialState","columns","current","unstable_caches","columnsTypes","columnTypes","columnsState","columnsToUpsert","shouldRegenColumnVisibilityModelFromColumns","currentColumnVisibilityModel","keepOnlyColumnsToUpsert","useGridColumns","_props$initialState5","_props$componentsProp2","logger","useMemo","previousColumnsProp","useRef","previousColumnTypesProp","unstable_registerControlState","stateId","propModel","propOnChange","onColumnVisibilityModelChange","stateSelector","changeEvent","setGridColumnsState","useCallback","debug","setState","forceUpdate","publishEvent","all","getColumn","field","getAllColumns","getVisibleColumns","getColumnsMeta","getColumnIndex","useVisibleColumns","arguments","length","undefined","findIndex","col","getColumnPosition","index","setColumnVisibilityModel","model","currentModel","updateColumns","updateColumn","column","setColumnVisibility","isVisible","_columnVisibilityMode","isCurrentlyVisible","newModel","_defineProperty","newColumn","hide","params","colDef","setColumnIndex","targetIndexPosition","allColumns","oldIndexPosition","concat","updatedColumns","_toConsumableArray","fieldRemoved","splice","element","getColumnHeaderElement","targetIndex","oldIndex","setColumnWidth","width","columnApi","stateExportPreProcessing","prevState","context","columnsStateToExport","_props$initialState$c2","_props$initialState4","_props$initialState4$","columnVisibilityModelToExport","shouldExportColumnVisibilityModel","exportOnlyDirtyModels","Object","keys","orderedFields","dimensions","forEach","hasBeenResized","colDefDimensions","propertyName","propertyValue","Infinity","stateRestorePreProcessing","_context$stateToResto","columnVisibilityModelToImport","stateToRestore","preferencePanelPreProcessing","initialValue","value","_props$componentsProp","ColumnsPanel","components","componentsProps","columnsPanel","prevInnerWidth","handleGridSizeChange","viewportInnerSize","onColumnVisibilityChange","hydrateColumns","info","isFirstRender","useEffect"],"sources":["/Users/guilherme/Downloads/react-loan-calculator-main/node_modules/@mui/x-data-grid/hooks/features/columns/useGridColumns.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridColumnFieldsSelector, gridColumnDefinitionsSelector, gridColumnLookupSelector, gridColumnsMetaSelector, gridColumnsSelector, gridColumnVisibilityModelSelector, gridVisibleColumnDefinitionsSelector, gridColumnPositionsSelector } from './gridColumnsSelector';\nimport { useGridApiEventHandler, useGridApiOptionHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridRegisterPipeProcessor, useGridRegisterPipeApplier } from '../../core/pipeProcessing';\nimport { hydrateColumnsWidth, computeColumnTypes, createColumnsState, mergeColumnsState, COLUMNS_DIMENSION_PROPERTIES } from './gridColumnsUtils';\nimport { GridPreferencePanelsValue } from '../preferencesPanel';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const columnsStateInitializer = (state, props, apiRef) => {\n  var _props$initialState, _props$initialState$c, _props$initialState2, _ref, _props$columnVisibili, _props$initialState3, _props$initialState3$;\n\n  const isUsingColumnVisibilityModel = !!props.columnVisibilityModel || !!((_props$initialState = props.initialState) != null && (_props$initialState$c = _props$initialState.columns) != null && _props$initialState$c.columnVisibilityModel);\n  apiRef.current.unstable_caches.columns = {\n    isUsingColumnVisibilityModel\n  };\n  const columnsTypes = computeColumnTypes(props.columnTypes);\n  const columnsState = createColumnsState({\n    apiRef,\n    columnTypes: columnsTypes,\n    columnsToUpsert: props.columns,\n    initialState: (_props$initialState2 = props.initialState) == null ? void 0 : _props$initialState2.columns,\n    shouldRegenColumnVisibilityModelFromColumns: !isUsingColumnVisibilityModel,\n    currentColumnVisibilityModel: (_ref = (_props$columnVisibili = props.columnVisibilityModel) != null ? _props$columnVisibili : (_props$initialState3 = props.initialState) == null ? void 0 : (_props$initialState3$ = _props$initialState3.columns) == null ? void 0 : _props$initialState3$.columnVisibilityModel) != null ? _ref : {},\n    keepOnlyColumnsToUpsert: true\n  });\n  return _extends({}, state, {\n    columns: columnsState\n  });\n};\n/**\n * @requires useGridParamsApi (method)\n * @requires useGridDimensions (method, event) - can be after\n * TODO: Impossible priority - useGridParamsApi also needs to be after useGridColumns\n */\n\nexport function useGridColumns(apiRef, props) {\n  var _props$initialState5, _props$componentsProp2;\n\n  const logger = useGridLogger(apiRef, 'useGridColumns');\n  const columnTypes = React.useMemo(() => computeColumnTypes(props.columnTypes), [props.columnTypes]);\n  const previousColumnsProp = React.useRef(props.columns);\n  const previousColumnTypesProp = React.useRef(columnTypes);\n  apiRef.current.unstable_registerControlState({\n    stateId: 'visibleColumns',\n    propModel: props.columnVisibilityModel,\n    propOnChange: props.onColumnVisibilityModelChange,\n    stateSelector: gridColumnVisibilityModelSelector,\n    changeEvent: 'columnVisibilityModelChange'\n  });\n  const setGridColumnsState = React.useCallback(columnsState => {\n    logger.debug('Updating columns state.');\n    apiRef.current.setState(mergeColumnsState(columnsState));\n    apiRef.current.forceUpdate();\n    apiRef.current.publishEvent('columnsChange', columnsState.all);\n  }, [logger, apiRef]);\n  /**\n   * API METHODS\n   */\n\n  const getColumn = React.useCallback(field => gridColumnLookupSelector(apiRef)[field], [apiRef]);\n  const getAllColumns = React.useCallback(() => gridColumnDefinitionsSelector(apiRef), [apiRef]);\n  const getVisibleColumns = React.useCallback(() => gridVisibleColumnDefinitionsSelector(apiRef), [apiRef]);\n  const getColumnsMeta = React.useCallback(() => gridColumnsMetaSelector(apiRef), [apiRef]);\n  const getColumnIndex = React.useCallback((field, useVisibleColumns = true) => {\n    const columns = useVisibleColumns ? gridVisibleColumnDefinitionsSelector(apiRef) : gridColumnDefinitionsSelector(apiRef);\n    return columns.findIndex(col => col.field === field);\n  }, [apiRef]);\n  const getColumnPosition = React.useCallback(field => {\n    const index = getColumnIndex(field);\n    return gridColumnPositionsSelector(apiRef)[index];\n  }, [apiRef, getColumnIndex]);\n  const setColumnVisibilityModel = React.useCallback(model => {\n    const currentModel = gridColumnVisibilityModelSelector(apiRef);\n\n    if (currentModel !== model) {\n      apiRef.current.setState(state => _extends({}, state, {\n        columns: createColumnsState({\n          apiRef,\n          columnTypes,\n          columnsToUpsert: [],\n          initialState: undefined,\n          shouldRegenColumnVisibilityModelFromColumns: false,\n          currentColumnVisibilityModel: model,\n          keepOnlyColumnsToUpsert: false\n        })\n      }));\n      apiRef.current.forceUpdate();\n    }\n  }, [apiRef, columnTypes]);\n  const updateColumns = React.useCallback(columns => {\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: columns,\n      initialState: undefined,\n      shouldRegenColumnVisibilityModelFromColumns: true,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, setGridColumnsState, columnTypes]);\n  const updateColumn = React.useCallback(column => apiRef.current.updateColumns([column]), [apiRef]);\n  const setColumnVisibility = React.useCallback((field, isVisible) => {\n    // We keep updating the `hide` option of `GridColDef` when not controlling the model to avoid any breaking change.\n    // `updateColumns` take care of updating the model itself if needs be.\n    // TODO v6: stop using the `hide` field even when the model is not defined\n    if (apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel) {\n      var _columnVisibilityMode;\n\n      const columnVisibilityModel = gridColumnVisibilityModelSelector(apiRef);\n      const isCurrentlyVisible = (_columnVisibilityMode = columnVisibilityModel[field]) != null ? _columnVisibilityMode : true;\n\n      if (isVisible !== isCurrentlyVisible) {\n        const newModel = _extends({}, columnVisibilityModel, {\n          [field]: isVisible\n        });\n\n        apiRef.current.setColumnVisibilityModel(newModel);\n      }\n    } else {\n      const column = apiRef.current.getColumn(field);\n\n      const newColumn = _extends({}, column, {\n        hide: !isVisible\n      });\n\n      apiRef.current.updateColumns([newColumn]);\n      const params = {\n        field,\n        colDef: newColumn,\n        isVisible\n      };\n      apiRef.current.publishEvent('columnVisibilityChange', params);\n    }\n  }, [apiRef]);\n  const setColumnIndex = React.useCallback((field, targetIndexPosition) => {\n    const allColumns = gridColumnFieldsSelector(apiRef);\n    const oldIndexPosition = allColumns.findIndex(col => col === field);\n\n    if (oldIndexPosition === targetIndexPosition) {\n      return;\n    }\n\n    logger.debug(`Moving column ${field} to index ${targetIndexPosition}`);\n    const updatedColumns = [...allColumns];\n    const fieldRemoved = updatedColumns.splice(oldIndexPosition, 1)[0];\n    updatedColumns.splice(targetIndexPosition, 0, fieldRemoved);\n    setGridColumnsState(_extends({}, gridColumnsSelector(apiRef.current.state), {\n      all: updatedColumns\n    }));\n    const params = {\n      field,\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: apiRef.current.getColumn(field),\n      targetIndex: targetIndexPosition,\n      oldIndex: oldIndexPosition\n    };\n    apiRef.current.publishEvent('columnOrderChange', params);\n  }, [apiRef, logger, setGridColumnsState]);\n  const setColumnWidth = React.useCallback((field, width) => {\n    logger.debug(`Updating column ${field} width to ${width}`);\n    const column = apiRef.current.getColumn(field);\n\n    const newColumn = _extends({}, column, {\n      width\n    });\n\n    apiRef.current.updateColumns([newColumn]);\n    apiRef.current.publishEvent('columnWidthChange', {\n      element: apiRef.current.getColumnHeaderElement(field),\n      colDef: newColumn,\n      width\n    });\n  }, [apiRef, logger]);\n  const columnApi = {\n    getColumn,\n    getAllColumns,\n    getColumnIndex,\n    getColumnPosition,\n    getVisibleColumns,\n    getColumnsMeta,\n    updateColumn,\n    updateColumns,\n    setColumnVisibilityModel,\n    setColumnVisibility,\n    setColumnIndex,\n    setColumnWidth\n  };\n  useGridApiMethod(apiRef, columnApi, 'GridColumnApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    const columnsStateToExport = {};\n\n    if (apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel) {\n      var _props$initialState$c2, _props$initialState4, _props$initialState4$;\n\n      const columnVisibilityModelToExport = gridColumnVisibilityModelSelector(apiRef);\n      const shouldExportColumnVisibilityModel = // Always export if the `exportOnlyDirtyModels` property is activated\n      !context.exportOnlyDirtyModels || // Always export if the model is controlled\n      props.columnVisibilityModel != null || // Always export if the model has been initialized\n      // TODO v6 Do a nullish check instead to export even if the initial model equals \"{}\"\n      Object.keys((_props$initialState$c2 = (_props$initialState4 = props.initialState) == null ? void 0 : (_props$initialState4$ = _props$initialState4.columns) == null ? void 0 : _props$initialState4$.columnVisibilityModel) != null ? _props$initialState$c2 : {}).length > 0 || // Always export if the model is not empty\n      Object.keys(columnVisibilityModelToExport).length > 0;\n\n      if (shouldExportColumnVisibilityModel) {\n        columnsStateToExport.columnVisibilityModel = columnVisibilityModelToExport;\n      }\n    }\n\n    columnsStateToExport.orderedFields = gridColumnFieldsSelector(apiRef);\n    const columns = gridColumnDefinitionsSelector(apiRef);\n    const dimensions = {};\n    columns.forEach(colDef => {\n      if (colDef.hasBeenResized) {\n        const colDefDimensions = {};\n        COLUMNS_DIMENSION_PROPERTIES.forEach(propertyName => {\n          let propertyValue = colDef[propertyName];\n\n          if (propertyValue === Infinity) {\n            propertyValue = -1;\n          }\n\n          colDefDimensions[propertyName] = propertyValue;\n        });\n        dimensions[colDef.field] = colDefDimensions;\n      }\n    });\n\n    if (Object.keys(dimensions).length > 0) {\n      columnsStateToExport.dimensions = dimensions;\n    }\n\n    return _extends({}, prevState, {\n      columns: columnsStateToExport\n    });\n  }, [apiRef, props.columnVisibilityModel, (_props$initialState5 = props.initialState) == null ? void 0 : _props$initialState5.columns]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    var _context$stateToResto;\n\n    const columnVisibilityModelToImport = apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel ? (_context$stateToResto = context.stateToRestore.columns) == null ? void 0 : _context$stateToResto.columnVisibilityModel : undefined;\n    const initialState = context.stateToRestore.columns;\n\n    if (columnVisibilityModelToImport == null && initialState == null) {\n      return params;\n    }\n\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: [],\n      initialState,\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      currentColumnVisibilityModel: columnVisibilityModelToImport,\n      keepOnlyColumnsToUpsert: false\n    });\n    apiRef.current.setState(mergeColumnsState(columnsState));\n\n    if (initialState != null) {\n      apiRef.current.publishEvent('columnsChange', columnsState.all);\n    }\n\n    return params;\n  }, [apiRef, columnTypes]);\n  const preferencePanelPreProcessing = React.useCallback((initialValue, value) => {\n    if (value === GridPreferencePanelsValue.columns) {\n      var _props$componentsProp;\n\n      const ColumnsPanel = props.components.ColumnsPanel;\n      return /*#__PURE__*/_jsx(ColumnsPanel, _extends({}, (_props$componentsProp = props.componentsProps) == null ? void 0 : _props$componentsProp.columnsPanel));\n    }\n\n    return initialValue;\n  }, [props.components.ColumnsPanel, (_props$componentsProp2 = props.componentsProps) == null ? void 0 : _props$componentsProp2.columnsPanel]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  /**\n   * EVENTS\n   */\n\n  const prevInnerWidth = React.useRef(null);\n\n  const handleGridSizeChange = viewportInnerSize => {\n    if (prevInnerWidth.current !== viewportInnerSize.width) {\n      prevInnerWidth.current = viewportInnerSize.width;\n      setGridColumnsState(hydrateColumnsWidth(gridColumnsSelector(apiRef.current.state), viewportInnerSize.width));\n    }\n  };\n\n  useGridApiEventHandler(apiRef, 'viewportInnerSizeChange', handleGridSizeChange);\n  useGridApiOptionHandler(apiRef, 'columnVisibilityChange', props.onColumnVisibilityChange);\n  /**\n   * APPLIERS\n   */\n\n  const hydrateColumns = React.useCallback(() => {\n    logger.info(`Columns pipe processing have changed, regenerating the columns`);\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      columnsToUpsert: [],\n      initialState: undefined,\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      keepOnlyColumnsToUpsert: false\n    });\n    setGridColumnsState(columnsState);\n  }, [apiRef, logger, setGridColumnsState, columnTypes]);\n  useGridRegisterPipeApplier(apiRef, 'hydrateColumns', hydrateColumns);\n  /**\n   * EFFECTS\n   */\n  // The effect do not track any value defined synchronously during the 1st render by hooks called after `useGridColumns`\n  // As a consequence, the state generated by the 1st run of this useEffect will always be equal to the initialization one\n\n  const isFirstRender = React.useRef(true);\n  React.useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    logger.info(`GridColumns have changed, new length ${props.columns.length}`);\n\n    if (previousColumnsProp.current === props.columns && previousColumnTypesProp.current === columnTypes) {\n      return;\n    }\n\n    const columnsState = createColumnsState({\n      apiRef,\n      columnTypes,\n      initialState: undefined,\n      // If the user provides a model, we don't want to set it in the state here because it has it's dedicated `useEffect` which calls `setColumnVisibilityModel`\n      shouldRegenColumnVisibilityModelFromColumns: !apiRef.current.unstable_caches.columns.isUsingColumnVisibilityModel,\n      columnsToUpsert: props.columns,\n      keepOnlyColumnsToUpsert: true\n    });\n    previousColumnsProp.current = props.columns;\n    previousColumnTypesProp.current = columnTypes;\n    setGridColumnsState(columnsState);\n  }, [logger, apiRef, setGridColumnsState, props.columns, columnTypes]);\n  React.useEffect(() => {\n    if (props.columnVisibilityModel !== undefined) {\n      apiRef.current.setColumnVisibilityModel(props.columnVisibilityModel);\n    }\n  }, [apiRef, logger, props.columnVisibilityModel]);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}