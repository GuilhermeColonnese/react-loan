{"ast":null,"code":"import _toConsumableArray from \"/Users/guilherme/Downloads/react-loan-calculator-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  var pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [].concat(_toConsumableArray(pinnedRows.top || []), _toConsumableArray(rows), _toConsumableArray(pinnedRows.bottom || []));\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\nexport var useGridKeyboardNavigation = function useGridKeyboardNavigation(apiRef, props) {\n  var logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  var initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  var currentPageRows = React.useMemo(function () {\n    return enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows);\n  }, [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  var goToCell = React.useCallback(function (colIndex, rowId) {\n    var closestColumnToUse = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left';\n    var visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    var nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n    var rowIndexRelativeToAllRows = visibleSortedRows.findIndex(function (row) {\n      return row.id === rowId;\n    });\n    logger.debug(\"Navigating to cell row \".concat(rowIndexRelativeToAllRows, \", col \").concat(colIndex));\n    apiRef.current.scrollToIndexes({\n      colIndex: colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    var field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  var goToHeader = React.useCallback(function (colIndex, event) {\n    logger.debug(\"Navigating to header col \".concat(colIndex));\n    apiRef.current.scrollToIndexes({\n      colIndex: colIndex\n    });\n    var field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  var getRowIdFromIndex = React.useCallback(function (rowIndex) {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  var handleCellNavigationKeyDown = React.useCallback(function (params, event) {\n    var dimensions = apiRef.current.getRootDimensions();\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n    var viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    var colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    var rowIndexBefore = currentPageRows.findIndex(function (row) {\n      return row.id === params.id;\n    });\n    var firstRowIndexInPage = 0;\n    var lastRowIndexInPage = currentPageRows.length - 1;\n    var firstColIndex = 0;\n    var lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    var shouldPreventDefault = true;\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n          break;\n        }\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n          break;\n        }\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n          break;\n        }\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n          break;\n        }\n      case ' ':\n        {\n          var field = params.field;\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n          var colDef = params.colDef;\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          var nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n          break;\n        }\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n          break;\n        }\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  var handleColumnHeaderKeyDown = React.useCallback(function (params, event) {\n    var headerTitleNode = event.currentTarget.querySelector(\".\".concat(gridClasses.columnHeaderTitleContainerContent));\n    var isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n    var dimensions = apiRef.current.getRootDimensions();\n    if (!dimensions) {\n      return;\n    }\n    var viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    var colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    var firstRowIndexInPage = 0;\n    var lastRowIndexInPage = currentPageRows.length - 1;\n    var firstColIndex = 0;\n    var lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    var shouldPreventDefault = true;\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n          break;\n        }\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n          break;\n        }\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n          break;\n        }\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n          break;\n        }\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n          break;\n        }\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  var handleCellKeyDown = React.useCallback(function (params, event) {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n    var cellParams = apiRef.current.getCellParams(params.id, params.field);\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};","map":{"version":3,"names":["React","gridVisibleColumnDefinitionsSelector","useGridLogger","useGridApiEventHandler","gridVisibleSortedRowEntriesSelector","useGridVisibleRows","GRID_CHECKBOX_SELECTION_COL_DEF","gridClasses","GridCellModes","isNavigationKey","GRID_DETAIL_PANEL_TOGGLE_FIELD","gridPinnedRowsSelector","enrichPageRowsWithPinnedRows","apiRef","rows","pinnedRows","concat","_toConsumableArray","top","bottom","useGridKeyboardNavigation","props","logger","initialCurrentPageRows","currentPageRows","useMemo","goToCell","useCallback","colIndex","rowId","closestColumnToUse","arguments","length","undefined","visibleSortedRows","nextCellColSpanInfo","current","unstable_getCellColSpanInfo","spannedByColSpan","leftVisibleCellIndex","rightVisibleCellIndex","rowIndexRelativeToAllRows","findIndex","row","id","debug","scrollToIndexes","rowIndex","field","getVisibleColumns","setCellFocus","goToHeader","event","setColumnHeaderFocus","getRowIdFromIndex","handleCellNavigationKeyDown","params","dimensions","getRootDimensions","viewportPageSize","unstable_getViewportPageSize","colIndexBefore","getColumnIndex","rowIndexBefore","firstRowIndexInPage","lastRowIndexInPage","firstColIndex","lastColIndex","shouldPreventDefault","key","shiftKey","colDef","type","Math","min","nextRowIndex","max","ctrlKey","metaKey","preventDefault","handleColumnHeaderKeyDown","headerTitleNode","currentTarget","querySelector","columnHeaderTitleContainerContent","isFromInsideContent","contains","target","toggleColumnMenu","handleCellKeyDown","cellParams","getCellParams","cellMode","Edit","publishEvent"],"sources":["/Users/guilherme/Downloads/react-loan-calculator-main/node_modules/@mui/x-data-grid/hooks/features/keyboardNavigation/useGridKeyboardNavigation.js"],"sourcesContent":["import * as React from 'react';\nimport { gridVisibleColumnDefinitionsSelector } from '../columns/gridColumnsSelector';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { gridVisibleSortedRowEntriesSelector } from '../filter/gridFilterSelector';\nimport { useGridVisibleRows } from '../../utils/useGridVisibleRows';\nimport { GRID_CHECKBOX_SELECTION_COL_DEF } from '../../../colDef/gridCheckboxSelectionColDef';\nimport { gridClasses } from '../../../constants/gridClasses';\nimport { GridCellModes } from '../../../models/gridEditRowModel';\nimport { isNavigationKey } from '../../../utils/keyboardUtils';\nimport { GRID_DETAIL_PANEL_TOGGLE_FIELD } from '../../../constants/gridDetailPanelToggleField';\nimport { gridPinnedRowsSelector } from '../rows/gridRowsSelector';\n\nfunction enrichPageRowsWithPinnedRows(apiRef, rows) {\n  const pinnedRows = gridPinnedRowsSelector(apiRef) || {};\n  return [...(pinnedRows.top || []), ...rows, ...(pinnedRows.bottom || [])];\n}\n/**\n * @requires useGridSorting (method) - can be after\n * @requires useGridFilter (state) - can be after\n * @requires useGridColumns (state, method) - can be after\n * @requires useGridDimensions (method) - can be after\n * @requires useGridFocus (method) - can be after\n * @requires useGridScroll (method) - can be after\n * @requires useGridColumnSpanning (method) - can be after\n */\n\n\nexport const useGridKeyboardNavigation = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridKeyboardNavigation');\n  const initialCurrentPageRows = useGridVisibleRows(apiRef, props).rows;\n  const currentPageRows = React.useMemo(() => enrichPageRowsWithPinnedRows(apiRef, initialCurrentPageRows), [apiRef, initialCurrentPageRows]);\n  /**\n   * @param {number} colIndex Index of the column to focus\n   * @param {number} rowIndex index of the row to focus\n   * @param {string} closestColumnToUse Which closest column cell to use when the cell is spanned by `colSpan`.\n   * TODO replace with apiRef.current.unstable_moveFocusToRelativeCell()\n   */\n\n  const goToCell = React.useCallback((colIndex, rowId, closestColumnToUse = 'left') => {\n    const visibleSortedRows = gridVisibleSortedRowEntriesSelector(apiRef);\n    const nextCellColSpanInfo = apiRef.current.unstable_getCellColSpanInfo(rowId, colIndex);\n\n    if (nextCellColSpanInfo && nextCellColSpanInfo.spannedByColSpan) {\n      if (closestColumnToUse === 'left') {\n        colIndex = nextCellColSpanInfo.leftVisibleCellIndex;\n      } else if (closestColumnToUse === 'right') {\n        colIndex = nextCellColSpanInfo.rightVisibleCellIndex;\n      }\n    } // `scrollToIndexes` requires a rowIndex relative to all visible rows.\n    // Those rows do not include pinned rows, but pinned rows do not need scroll anyway.\n\n\n    const rowIndexRelativeToAllRows = visibleSortedRows.findIndex(row => row.id === rowId);\n    logger.debug(`Navigating to cell row ${rowIndexRelativeToAllRows}, col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex,\n      rowIndex: rowIndexRelativeToAllRows\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setCellFocus(rowId, field);\n  }, [apiRef, logger]);\n  const goToHeader = React.useCallback((colIndex, event) => {\n    logger.debug(`Navigating to header col ${colIndex}`);\n    apiRef.current.scrollToIndexes({\n      colIndex\n    });\n    const field = apiRef.current.getVisibleColumns()[colIndex].field;\n    apiRef.current.setColumnHeaderFocus(field, event);\n  }, [apiRef, logger]);\n  const getRowIdFromIndex = React.useCallback(rowIndex => {\n    return currentPageRows[rowIndex].id;\n  }, [currentPageRows]);\n  const handleCellNavigationKeyDown = React.useCallback((params, event) => {\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (currentPageRows.length === 0 || !dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const rowIndexBefore = currentPageRows.findIndex(row => row.id === params.id);\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n      case 'Enter':\n        {\n          // TODO v6: Remove Enter case because `cellNavigationKeyDown` is not fired by the new editing API\n          // \"Enter\" is only triggered by the row / cell editing feature\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore + 1));\n          }\n\n          break;\n        }\n\n      case 'ArrowUp':\n        {\n          if (rowIndexBefore > firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(rowIndexBefore - 1));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'Tab':\n        {\n          // \"Tab\" is only triggered by the row / cell editing feature\n          if (event.shiftKey && colIndexBefore > firstColIndex) {\n            goToCell(colIndexBefore - 1, getRowIdFromIndex(rowIndexBefore), 'left');\n          } else if (!event.shiftKey && colIndexBefore < lastColIndex) {\n            goToCell(colIndexBefore + 1, getRowIdFromIndex(rowIndexBefore), 'right');\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          const field = params.field;\n\n          if (field === GRID_DETAIL_PANEL_TOGGLE_FIELD) {\n            break;\n          }\n\n          const colDef = params.colDef;\n\n          if (colDef && colDef.type === 'treeDataGroup') {\n            break;\n          }\n\n          if (!event.shiftKey && rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (rowIndexBefore < lastRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(rowIndexBefore + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'PageUp':\n        {\n          // Go to the first row before going to header\n          const nextRowIndex = Math.max(rowIndexBefore - viewportPageSize, firstRowIndexInPage);\n\n          if (nextRowIndex !== rowIndexBefore && nextRowIndex >= firstRowIndexInPage) {\n            goToCell(colIndexBefore, getRowIdFromIndex(nextRowIndex));\n          } else {\n            goToHeader(colIndexBefore, event);\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(firstColIndex, getRowIdFromIndex(firstRowIndexInPage));\n          } else {\n            goToCell(firstColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      case 'End':\n        {\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\n            goToCell(lastColIndex, getRowIdFromIndex(lastRowIndexInPage));\n          } else {\n            goToCell(lastColIndex, getRowIdFromIndex(rowIndexBefore));\n          }\n\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleColumnHeaderKeyDown = React.useCallback((params, event) => {\n    const headerTitleNode = event.currentTarget.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n    const isFromInsideContent = !!headerTitleNode && headerTitleNode.contains(event.target);\n\n    if (isFromInsideContent && params.field !== GRID_CHECKBOX_SELECTION_COL_DEF.field) {\n      // When focus is on a nested input, keyboard events have no effect to avoid conflicts with native events.\n      // There is one exception for the checkBoxHeader\n      return;\n    }\n\n    const dimensions = apiRef.current.getRootDimensions();\n\n    if (!dimensions) {\n      return;\n    }\n\n    const viewportPageSize = apiRef.current.unstable_getViewportPageSize();\n    const colIndexBefore = params.field ? apiRef.current.getColumnIndex(params.field) : 0;\n    const firstRowIndexInPage = 0;\n    const lastRowIndexInPage = currentPageRows.length - 1;\n    const firstColIndex = 0;\n    const lastColIndex = gridVisibleColumnDefinitionsSelector(apiRef).length - 1;\n    let shouldPreventDefault = true;\n\n    switch (event.key) {\n      case 'ArrowDown':\n        {\n          if (firstRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(firstRowIndexInPage));\n          }\n\n          break;\n        }\n\n      case 'ArrowRight':\n        {\n          if (colIndexBefore < lastColIndex) {\n            goToHeader(colIndexBefore + 1, event);\n          }\n\n          break;\n        }\n\n      case 'ArrowLeft':\n        {\n          if (colIndexBefore > firstColIndex) {\n            goToHeader(colIndexBefore - 1, event);\n          }\n\n          break;\n        }\n\n      case 'PageDown':\n        {\n          if (firstRowIndexInPage !== null && lastRowIndexInPage !== null) {\n            goToCell(colIndexBefore, getRowIdFromIndex(Math.min(firstRowIndexInPage + viewportPageSize, lastRowIndexInPage)));\n          }\n\n          break;\n        }\n\n      case 'Home':\n        {\n          goToHeader(firstColIndex, event);\n          break;\n        }\n\n      case 'End':\n        {\n          goToHeader(lastColIndex, event);\n          break;\n        }\n\n      case 'Enter':\n        {\n          if (event.ctrlKey || event.metaKey) {\n            apiRef.current.toggleColumnMenu(params.field);\n          }\n\n          break;\n        }\n\n      case ' ':\n        {\n          // prevent Space event from scrolling\n          break;\n        }\n\n      default:\n        {\n          shouldPreventDefault = false;\n        }\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }, [apiRef, currentPageRows, goToCell, goToHeader, getRowIdFromIndex]);\n  const handleCellKeyDown = React.useCallback((params, event) => {\n    // Ignore portal\n    if (!event.currentTarget.contains(event.target)) {\n      return;\n    } // Get the most recent params because the cell mode may have changed by another listener\n\n\n    const cellParams = apiRef.current.getCellParams(params.id, params.field);\n\n    if (cellParams.cellMode !== GridCellModes.Edit && isNavigationKey(event.key)) {\n      apiRef.current.publishEvent('cellNavigationKeyDown', cellParams, event);\n    }\n  }, [apiRef]);\n  useGridApiEventHandler(apiRef, 'cellNavigationKeyDown', handleCellNavigationKeyDown);\n  useGridApiEventHandler(apiRef, 'columnHeaderKeyDown', handleColumnHeaderKeyDown);\n  useGridApiEventHandler(apiRef, 'cellKeyDown', handleCellKeyDown);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}